# 🚀 News Spectrum (News Toss) - 프로젝트 현황 보고서

## 1. 프로젝트 목표 (Goal)
**"글로벌 인사이트와 로컬 볼륨을 한눈에"**
*   전 세계 뉴스(RSS)를 수집하여 **"지금 세계가 주목하는 이슈(Megatopic)"**를 실시간으로 파악합니다.
*   단순 번역이 아니라, 각 국가가 해당 이슈를 **어떤 관점(Factual, Critical, Supportive)**으로 보는지 비교 분석합니다.
*   **사용자 가치**: 복잡한 국제 뉴스를 "Top 10 메가토픽"과 "국가별 관점(VS 카드)"으로 쉽고 직관적으로 소비.

---

## 2. 전체 파이프라인 과정 (Process)

데이터는 아래 3단계 과정을 거쳐 사용자에게 전달됩니다.

### **Step 1: 데이터 수집 (Ingestion)**
*   **동작**: 전 세계 주요 언론사(US, KR, CN, JP, FR 등 12개국)의 RSS 피드를 10분마다 수집.
*   **상태**: ✅ **정상 작동** (DB에 기사 적재 중)

### **Step 2: 로컬 토픽 클러스터링 (Local Clustering)**
*   **동작**: 각 국가별로 쏟아지는 기사들을 "사건 단위"로 묶습니다.
    *   예: "경제 뉴스" (X) -> "한화 이글스 FA 계약", "비트코인 10만불 돌파" (O)
*   **기술**: `HDBSCAN` (밀도 기반 클러스터링) + `Gemini` (토픽 네이밍)
*   **현황**: ✅ **품질 개선 완료**
    *   기존에 뭉뚱그려지던 문제를 해결하여, 현재 매우 구체적인 토픽이 생성되고 있습니다.

### **Step 3: 글로벌 메가토픽 분석 (Global Megatopic)**
*   **동작**: Step 2에서 만든 **로컬 토픽**들을 다시 전 세계 단위로 묶습니다.
    *   예: [KR] 비트코인 급등 + [US] Crypto Surge + [JP] BTC 상승 -> **[Global] 글로벌 암호화폐 시장 과열 양상**
*   **기술**: `Agglomerative Clustering` (유사도 기반 병합) + `Gemini` (글로벌 헤드라인 생성)
*   **현황**: ⚠️ **중단 (Bottleneck)**
    *   **문제**: 토픽 간 유사도를 계산하기 위해 Google API(`text-embedding-004`)를 호출하는 과정에서 **DNS/네트워크 타임아웃 오류**가 지속 발생.
    *   유선/무선 네트워크 변경 및 재시도 로직을 적용했으나 해결되지 않음.

---

## 3. 전문가 의견 종합 및 의사결정 옵션 (Decision Matrix)

현재 상황을 타개하기 위한 두 가지 핵심 전략이 제시되었습니다.

### **옵션 A: 로컬 임베딩 모델 전환 (즉시 해결형) - [채택 및 구현 완료]**
> **"네트워크 병목을 원천 차단하고, 비용 0원으로 안정성 확보"** (Opinion 1)

*   **상태**: ✅ **구현 완료 (2025-11-29)**
    *   `llm_topic_clustering_embedding.py` (Step 2) 및 `llm_megatopic_analysis.py` (Step 3) 모두 `sentence-transformers`로 교체됨.
    *   파이프라인 최적화 (DB Cleanup, Retry Logic) 적용 완료.
*   **핵심 내용**: Google API 대신 내 컴퓨터(로컬)에서 돌아가는 `sentence-transformers` 모델 사용.
*   **추천 모델**: `paraphrase-multilingual-MiniLM-L12-v2` (다국어 지원 필수, 빠르고 가벼움).
*   **장점**:
    *   **안정성**: 네트워크 상태와 무관하게 100% 동작. DNS 오류 즉시 해결.
    *   **비용**: API 호출 비용 완전 무료.
    *   **속도**: 네트워크 대기 시간 없음.
*   **단점**:
    *   **자원**: 로컬 CPU/RAM 사용 (현재 장비로는 충분).
    *   **관리**: 추후 서버 배포 시 모델 파일 관리 필요.

### **옵션 B: 클라우드 환경(GitHub Actions) 이관 (구조적 해결형)**
> **"로컬 환경 문제일 수 있으니, 실행 환경을 클라우드로 옮기자"** (Opinion 2)

*   **핵심 내용**: 로컬에서 돌리지 말고, GitHub Actions 서버에서 스크립트를 실행.
*   **전략**:
    1.  GitHub Actions 환경은 네트워크가 안정적이므로 Google API가 잘 될 가능성 높음.
    2.  만약 거기서도 안 되면 `OpenAI Embedding`으로 공급자 교체.
*   **장점**:
    *   **표준화**: "내 컴퓨터에서만 안 되는 문제"를 근본적으로 회피.
    *   **확장성**: 추후 정식 서비스 운영 구조와 유사함.
*   **단점**:
    *   **시간**: Actions 워크플로우 세팅 및 디버깅 시간 소요.
    *   **비용**: OpenAI 전환 시 비용 발생 가능성.

---

## 4. 종합 추천 (Recommendation)

**"현재 개발 단계(MVP)에서는 [옵션 A: 로컬 임베딩]이 가장 효율적입니다."**

1.  **즉시성**: 지금 당장 막혀있는 파이프라인을 뚫고 결과를 확인해야 합니다. 옵션 A는 코드 수정 즉시 실행 가능합니다.
2.  **비용/효율**: MVP 단계에서 불필요한 API 비용이나 인프라 세팅 시간을 줄일 수 있습니다.
3.  **유연성**: 나중에 옵션 B(GitHub Actions)로 넘어가더라도, 로컬 임베딩 코드는 그대로 컨테이너에 담아 배포할 수 있습니다.

**결론**: **`paraphrase-multilingual-MiniLM-L12-v2` 모델을 사용한 로컬 임베딩 방식**으로 진행하는 것을 승인 요청드립니다.
